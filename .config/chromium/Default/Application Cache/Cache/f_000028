/*!
 * Notifications and Bookmarks Components
 * @version 1.2.0
 * @author MercadoLibre.com Front-End Team
 * @see ui-navigation_modeless_box
 */
!function e(t,n,i){function s(o,a){if(!n[o]){if(!t[o]){var l="function"==typeof require&&require;if(!a&&l)return l(o,!0);if(r)return r(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};t[o][0].call(c.exports,function(e){var n=t[o][1][e];return s(n?n:e)},c,c.exports,e,t,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)s(i[o]);return s}({1:[function(e,t,n){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function s(e){return"function"==typeof e}function r(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!r(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,n,i,r,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1;if(s(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,r=new Array(i-1),l=1;i>l;l++)r[l-1]=arguments[l];n.apply(this,r)}else if(o(n)){for(i=arguments.length,r=new Array(i-1),l=1;i>l;l++)r[l-1]=arguments[l];for(u=n.slice(),i=u.length,l=0;i>l;l++)u[l].apply(this,r)}return!0},i.prototype.addListener=function(e,t){var n;if(!s(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,s(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var n;n=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!s(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},i.prototype.removeListener=function(e,t){var n,i,r,a;if(!s(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],r=n.length,i=-1,n===t||s(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(a=r;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){i=a;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],s(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?s(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?s(e._events[t])?1:e._events[t].length:0}},{}],2:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){var n=arguments,i=void 0;t=1===n.length?n[0]:n[1];var s=function(){},r={url:2===n.length&&"string"==typeof e?e:".",cache:!0,data:{},headers:{},context:null,dataType:"text",method:"GET",credentials:"omit",success:s,error:s,complete:s};i=(0,o["default"])(r,t||{});var a={"application/json":"json","text/html":"html","text/plain":"text"},l={};for(var u in a)a.hasOwnProperty(u)&&(l[a[u]]=u);i.cache||(i.url=i.url+(~i.url.indexOf("?")?"&":"?")+"nc="+Math.floor(9e9*Math.random()));var c=function(e,t){i.complete.call(i.context,t,e)},f=function(e,t){var n="success";i.success.call(i.context,e,n,t),c(n,t)},d=function(e,t,n){i.error.call(i.context,n,t,e),c(t,n)},p=new XMLHttpRequest;p.onreadystatechange=function(){if(4!==p.readyState);else{var e=void 0,t=1223===p.status?204:p.status;if(t>=200&&300>t||304===t){var n=/([\/a-z]+)(;|\s|$)/.exec(p.getResponseHeader("content-type")),s=n&&a[n[1]]?a[n[1]].toLowerCase():"text";if(e=p.responseText,"json"===s)try{e=JSON.parse(e)}catch(r){e=p.responseText}f(e,p,i)}else d(new Error(p.statusText),"error",p,i)}},p.onerror=function(){d(new Error(p.statusText||"Network request failed"),"error",p,i)},p.open(i.method,i.url),i.dataType&&l[i.dataType.toLowerCase()]&&(i.headers.Accept=l[i.dataType.toLowerCase()]+", */*; q=0.01"),"POST"===i.method&&(i.headers=(0,o["default"])(i.headers,{"X-Requested-With":"XMLHttpRequest","Content-type":"application/x-www-form-urlencoded"})),"include"===i.credentials&&(p.withCredentials=!0);for(var h in i.headers)p.setRequestHeader(h,i.headers[h]);return p.send(i.data),this}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=s;var r=e("./extend"),o=i(r);t.exports=n["default"]},{"./extend":7}],3:[function(e,t,n){"use strict";function i(e,t){o?e.classList.add(t):e.setAttribute("class",e.getAttribute("class")+" "+t)}function s(e,t){o?e.classList.remove(t):e.setAttribute("class",e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," "))}function r(e,t){var n;return n=o?e.classList.contains(t):new RegExp("(^| )"+t+"( |$)","gi").test(e.className)}Object.defineProperty(n,"__esModule",{value:!0}),n.addClass=i,n.removeClass=s,n.hasClass=r;var o=!!document.body.classList,a={addClass:i,removeClass:s,hasClass:r};n["default"]=a},{}],4:[function(e,t,n){"use strict";function i(e,t,n){var i,o=arguments,a=r(e),l=a.length;if("string"==typeof t&&2===o.length)return 0===l?"":s(a[0],t);3===o.length?i=function(e){e.style[t]=n}:"object"==typeof t&&(i=function(e){Object.keys(t).forEach(function(n){e.style[n]=t[n]})});for(var u=0;l>u;u++)i(a[u])}function s(e,t){return window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue(t):(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),e.currentStyle[t])}function r(e){return"string"==typeof e?o(document.querySelectorAll(e)):"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&Object.prototype.hasOwnProperty.call(e,"length")&&e.length>0&&e[0].nodeType>0?o(e):[e]}function o(e){for(var t=0,n=e.length,i=[];n>t;t++)i.push(e[t]);return i}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i,t.exports=n["default"]},{}],5:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e){return"string"==typeof e?r(document.querySelectorAll(e)):"object"==typeof e&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(e))&&Object.prototype.hasOwnProperty.call(e,"length")&&e.length>0&&e[0].nodeType>0?r(e):[e]}function r(e){for(var t=0,n=e.length,i=[];n>t;t++)i.push(e[t]);return i}function o(e,t){"string"!=typeof e&&(t=e,e=t.type);var n=void 0,i=-1!==m.indexOf(e),s=i&&-1!==y.indexOf(e),r=(0,p["default"])({bubbles:i,cancelable:i,detail:void 0},t);return document.createEvent?(n=document.createEvent(s&&window.MouseEvent?"MouseEvents":"Events"),n.initEvent(e,r.bubbles,r.cancelable,r.detail)):document.createEventObject&&(n=document.createEventObject(window.event),s&&(n.button=1),r.bubbles||(n.cancelBubble=!0)),n}function a(e){return"on"===e.substr(0,2)?b?e.substr(2):e:b?e:"on"+e}function l(e,t,n,i){s(e).forEach(function(e){e[g](a(t),n,i||!1)})}function u(e,t,n,i){s(e).forEach(function(e){var s=n;n=function(t){return c(e,t.type,n),s.apply(e,arguments)},e[g](a(t),n,i||!1)})}function c(e,t,n){s(e).forEach(function(e){e[_](a(t),n)})}function f(e,t,n){var i=this,r="string"==typeof t?t:t.type;t="string"==typeof t||(0,v["default"])(t)?o(t,n):t,s(e).forEach(function(e){t.type in focus&&"function"==typeof i[t.type]?i[t.type]():b?e[j](t):e[j](a(r),t)})}Object.defineProperty(n,"__esModule",{value:!0}),n.initEvent=o,n.on=l,n.once=u,n.off=c,n.trigger=f;var d=e("./extend"),p=i(d),h=e("./isPlainObject"),v=i(h),m=function(){var e=[];for(var t in document)if("on"===t.substring(0,2)){var n=t.replace("on","");e.push(n)}return e}(),y=m.filter(function(e){return/^(?:click|dblclick|mouse(?:down|up|over|move|out))$/.test(e)}),b=document.addEventListener?!0:!1,g=b?"addEventListener":"attachEvent",_=b?"removeEventListener":"detachEvent",j=b?"dispatchEvent":"fireEvent",w={on:l,once:u,off:c,trigger:f};n["default"]=w},{"./extend":7,"./isPlainObject":8}],6:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var s=e("events"),r=i(s);n["default"]=r["default"],t.exports=n["default"]},{events:1}],7:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(){var e=void 0,t=void 0,n=void 0,i=void 0,r=void 0,a=void 0,l=arguments[0]||{},u=1,c=arguments.length,f=!1;if("boolean"==typeof l&&(f=l,l=arguments[u]||{},u++),u>=c)return l;for(;c>u;u++)if(null!=(e=arguments[u]))for(t in e)n=l[t],i=e[t],l!==i&&(f&&i&&((0,o["default"])(i)||(r=Array.isArray(i)))?(r?(r=!1,a=n&&Array.isArray(n)?n:[]):a=n&&(0,o["default"])(n)?n:{},l[t]=s(f,a,i)):void 0!==i&&(l[t]=i));return l}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=s;var r=e("./isPlainObject"),o=i(r);t.exports=n["default"]},{"./isPlainObject":8}],8:[function(e,t,n){"use strict";function i(e){return null==e?!1:"object"!=typeof e||e.nodeType||e===e.window?!1:e.constructor&&!Object.prototype.hasOwnProperty.call(e.constructor.prototype,"isPrototypeOf")?!1:!0}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i,t.exports=n["default"]},{}],9:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e){var t=e.getBoundingClientRect(),n=r(e),i=(0,u["default"])(),s={left:t.left,top:t.top};return"fixed"!==(0,a["default"])(e,"position")&&null===n&&(s.left+=i.left,s.top+=i.top),s}function r(e){for(var t=e.offsetParent,n=void 0;void 0===n;){if(null===t){n=null;break}"fixed"!==(0,a["default"])(t,"position")?t=t.offsetParent:n=t}return n}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=s;var o=e("./css"),a=i(o),l=e("./scroll"),u=i(l);t.exports=n["default"]},{"./css":4,"./scroll":10}],10:[function(e,t,n){"use strict";function i(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}}Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=i,t.exports=n["default"]},{}],11:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){return'\n        <span class="price-tag '+(e.classname?e.classname:"")+'" itemprop="offers" itemscope itemtype="http://schema.org/Offer">\n            <meta itemprop="price" content="'+e.fraction+(e.cents?""+e.decimal_separator+e.cents:"")+'"/>\n            '+(e.disabled?"<del>":"")+'\n            <span class="price-tag-symbol" itemprop="priceCurrency" '+(e.currency_id?'content="'+e.currency_id+'"':"")+">"+e.symbol+'</span>\n            <span class="price-tag-fraction">'+e.fraction+"</span>\n            "+(e.cents?'\n                <span class="price-tag-decimal-separator">'+e.decimal_separator+'</span>\n                <span class="price-tag-cents">'+e.cents+"</span>\n            ":"")+"\n            "+(e.disabled?"</del>":"")+"\n        </span>\n    "},t.exports=n["default"]},{}],12:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(e,t,n){for(var i=!0;i;){var s=e,r=t,o=n;i=!1,null===s&&(s=Function.prototype);var a=Object.getOwnPropertyDescriptor(s,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(s);if(null===u)return;e=u,t=r,n=o,i=!0,a=u=void 0}},l=e("./ModelessBox.js"),u=i(l),c=e("tiny.js/modules/ajax.js"),f=i(c),d=e("tiny.js/modules/domEvents.js"),p=function(e){function t(){var e=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(s(this,t),!n.hostname)throw new Error('Bookmarks Widget: Gimme a "hostname" param.');a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,"bookmarks",n),this.url=n.url||"https://myaccount."+n.hostname+"/bookmarks/api",this.page=1,this.fetching=!1,this.bus.on("item:remove",function(t){(0,d.trigger)(t.el,"bookmark:deleted"),e.remove(t)}),this.bus.on("scroll:ending",function(){e.view.collection.length<e.total&&e.fetch()})}return r(t,e),o(t,[{key:"fetch",value:function(){var e=this;this.fetching||(this.fetching=!0,(0,f["default"])(this.url+"?page="+this.page,{dataType:"json",credentials:"include",error:function(){return window.location=e.trigger.href},success:function(t){return e.fetching=!1,e.view._noResultsMessage=t.messages.no_results,t.results.length?(e.total=e.total||t.paging.total,e.page+=1,e.view.collectionAdd(t.results),e.view.collection.length<e.total&&e.view.addSpinner(),void(0,d.trigger)("body","bookmark:fetched")):(e.view.zrp(),void e.view.scrollbar.update())}}))}},{key:"remove",value:function(e){var t=this;this.total-=1,e.hide(),(0,f["default"])(this.url+"?itemId="+e.model.item_id,{method:"DELETE",credentials:"include",error:function(){},success:function(){t.view.collection.length<t.total&&(t.view.addSpinner(),t.fetch())}})}},{key:"reset",value:function(){this.page=1,this.total=0,this.view.ui.list.innerHTML='<li class="skeleton-spinner"></li>',this.view.collection=[],this.view.scrollbar.update()}},{key:"show",value:function(){return this.reset(),this.fetch(),a(Object.getPrototypeOf(t.prototype),"show",this).call(this),this}},{key:"hide",value:function(){return a(Object.getPrototypeOf(t.prototype),"hide",this).call(this),this}}]),t}(u["default"]);n["default"]=p,t.exports=n["default"]},{"./ModelessBox.js":14,"tiny.js/modules/ajax.js":2,"tiny.js/modules/domEvents.js":5}],13:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=e("../templates/item.template.js"),a=i(o),l=e("tiny.js/modules/domEvents.js"),u=function(){function e(t,n){var i=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];s(this,e),this._model=i,this.bus=n,this.type=t,this.el=this._constructEl(),this.bus.emit("item:add",this._model)}return r(e,[{key:"_constructEl",value:function(){var e=this,t=document.createElement("li");return t.className="modeless-box-item-wrapper",(0,l.on)(t,"click",function(t){"modeless-box-remove"===t.target.getAttribute("data-js")&&e.bus.emit("item:remove",e)}),t}},{key:"render",value:function(){this._model.type=this.type;var e=(0,a["default"])(this._model);e!==this.el.innerHTML&&(this.el.innerHTML=e)}},{key:"show",value:function(){this.el.style.display="block"}},{key:"hide",value:function(){this.el.style.display="none"}},{key:"model",set:function(e){this._model=e,this.render(),this.bus.emit("item:change",this._model)},get:function(){return this._model}}]),e}();n["default"]=u,t.exports=n["default"]},{"../templates/item.template.js":22,"tiny.js/modules/domEvents.js":5}],14:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=e("./Popup.js"),a=i(o),l=e("tiny.js/modules/classList.js"),u=i(l),c=e("tiny.js/modules/domEvents.js"),f=e("tiny.js/modules/eventEmitter.js"),d=i(f),p=function(){function e(t){var n=this,i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];s(this,e),this._ariaId="modeless-"+Math.floor(99*Math.random()),this.options=i,this.type=t,this.hidden=!0,this.bus=new d["default"],this.trigger=this._constructTrigger(),this.view=new a["default"](t,this.bus,{_ariaId:this._ariaId,trigger:this.trigger}),(0,c.on)(document,"click",function(){return n.hidden?!1:n.hide()})}return r(e,[{key:"_constructTrigger",value:function(){var e=this,t=this.options.trigger;return t?(u["default"].addClass(t,"modeless-box-trigger"),t.setAttribute("aria-owns",this._ariaId),t.setAttribute("aria-haspopup",!0),t.setAttribute("popup-hidden",!0),(0,c.on)(t,"click",function(t){t.preventDefault(),t.stopPropagation(),e.hidden?e.show():e.hide()}),t):!1}},{key:"show",value:function(){this.hidden=!1,this.trigger&&this.trigger.setAttribute("popup-hidden",!1),this.view.show()}},{key:"hide",value:function(){this.hidden=!0,this.trigger&&this.trigger.setAttribute("popup-hidden",!0),this.view.hide()}}]),e}();n["default"]=p,t.exports=n["default"]},{"./Popup.js":16,"tiny.js/modules/classList.js":3,"tiny.js/modules/domEvents.js":5,"tiny.js/modules/eventEmitter.js":6}],15:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(e,t,n){for(var i=!0;i;){var s=e,r=t,o=n;i=!1,null===s&&(s=Function.prototype);var a=Object.getOwnPropertyDescriptor(s,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(s);if(null===u)return;e=u,t=r,n=o,i=!0,a=u=void 0}},l=e("./ModelessBox.js"),u=i(l),c=function(e){function t(e){s(this,t),a(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return r(t,e),o(t,[{key:"show",value:function(){a(Object.getPrototypeOf(t.prototype),"show",this).call(this),this.popup.el.innerHTML="notif"}}]),t}(u["default"]);n["default"]=c,t.exports=n["default"]},{"./ModelessBox.js":14}],16:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=e("./Item.js"),a=i(o),l=e("../templates/popup.template.js"),u=i(l),c=e("../templates/noresults.template.js"),f=i(c),d=e("tiny.js/modules/domEvents.js"),p=e("./Scrollbar.js"),h=i(p),v=e("./positioner.js"),m=i(v),y=function(){function e(t,n){var i=this,r=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];s(this,e),this.options=r,this.bus=n,this.type=t,this.collection=[],this.el=this._constructEl(),this.ui={container:this.el.querySelector(".modeless-box-container"),list:this.el.querySelector("ul"),footer:this.el.querySelector(".modeless-box-footer")},this.scrollbar=new h["default"](n,this.ui),this.bus.on("item:remove",function(e){return i.collectionRemove(e.model)})}return r(e,[{key:"_constructEl",value:function(){var e=document.createElement("div");return e.className="modeless-box",e.setAttribute("role","dialog"),e.id=this.options._ariaId,e.innerHTML=(0,u["default"])({type:this.type,triggerHref:this.options.trigger.href}),e.hidden=!0,e.setAttribute("aria-hidden",!0),document.body.appendChild(e),(0,d.on)(e,"click",function(e){return e.stopPropagation()}),e}},{key:"show",value:function(){this.el.hidden=!1,this.el.setAttribute("aria-hidden",!1),(0,m["default"])(this.el,this.options.trigger),this.ui.footer.style.display="block"}},{key:"zrp",value:function(){this.ui.list.innerHTML=(0,f["default"])({message:this._noResultsMessage}),this.ui.footer.style.display="none"}},{key:"addSpinner",value:function(){var e=this.ui.list;e.querySelector(".skeleton-spinner")||e.insertAdjacentHTML("beforeend",'<li class="skeleton-spinner"></li>')}},{key:"hide",value:function(){this.el.hidden=!0,this.el.setAttribute("aria-hidden",!0)}},{key:"collectionAdd",value:function(e){if(!e.length)return this.zrp();this.ui.footer.style.display="block";for(var t=0,n=e.length;n>t;t+=1)this.collection.push(new a["default"](this.type,this.bus,e[t]));this.render(),this.bus.emit("collection:change",this.collection)}},{key:"collectionRemove",value:function(e){for(var t=[],n=0,i=this.collection.length;i>n;n+=1){var s=this.collection[n];e.item_id!==s.model.item_id&&t.push(s)}this.collection=t,this.collection.length||this.zrp(),this.bus.emit("collection:change",this.collection),this.scrollbar.update()}},{key:"render",value:function(){for(var e=document.createDocumentFragment(),t=0,n=this.collection.length;n>t;t+=1){var i=this.collection[t];i.render(),e.appendChild(i.el)}for(var s=this.ui.list;s.firstChild;)s.removeChild(s.firstChild);s.appendChild(e),this.scrollbar.update()}}]),e}();n["default"]=y,t.exports=n["default"]},{"../templates/noresults.template.js":23,"../templates/popup.template.js":24,"./Item.js":13,"./Scrollbar.js":17,"./positioner.js":19,"tiny.js/modules/domEvents.js":5}],17:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=e("tiny.js/modules/domEvents.js"),o=315,a=48,l=function(){function e(t,n){var s=this;i(this,e),this.bus=t,this.options=n,this.list=this.options.list,this.container=this.options.container,this.rail=this._constructRail(),this.bar=this._constructBar(),this.disabled=!0,this.barPosition=0,this.listPosition=0;var o=function(){var e=arguments.length<=0||void 0===arguments[0]?window.event:arguments[0];s.disabled||(e.preventDefault(),s.handleScroll(e.deltaY))};(0,r.on)(this.container,"mousewheel",o),(0,r.on)(this.container,"wheel",o)}return s(e,[{key:"_constructBar",value:function(){var e=document.createElement("div");return e.className="modeless-box-scroll-bar",e.setAttribute("aria-disabled",!0),this.container.appendChild(e),e}},{key:"_constructRail",value:function(){var e=document.createElement("div");return e.className="modeless-box-scroll-rail",e.setAttribute("aria-disabled",!0),this.container.appendChild(e),e}},{key:"limit",value:function(e,t,n){return t>e&&(e=t),e>n&&(e=n),e}},{key:"update",value:function(){var e=this;this.disabled=!0,this.list.style.position="static",setTimeout(function(){e.listSize=e.list.clientHeight,e.containerSize=e.listSize>=o?o:e.listSize,e.container.style.height=e.containerSize+"px",e.disabled=e.containerSize>=e.listSize,e.rail.setAttribute("aria-disabled",e.disabled),e.bar.setAttribute("aria-disabled",e.disabled),e.disabled||(e.barSize=e.containerSize*e.containerSize/e.listSize,e.list.style.position="absolute",e.container.style.width=e.container.clientWidth+"px",e.container.style.height=e.containerSize+"px",e.bar.style.height=e.barSize+"px",e.updatePosition())},0)}},{key:"updatePosition",value:function(){this.barPosition=this.limit(this.barPosition,0,this.containerSize-this.barSize),this.bar.style.top=this.barPosition+"px";var e=-this.listSize+this.containerSize;this.listPosition=this.limit(this.listPosition,e,0),this.list.style.top=this.listPosition+"px",this.listPosition<e+a&&this.bus.emit("scroll:ending")}},{key:"handleScroll",value:function(e){this.barPosition+=e/(this.listSize/this.containerSize),this.listPosition-=e,this.updatePosition()}}]),e}();n["default"]=l,t.exports=n["default"]},{"tiny.js/modules/domEvents.js":5}],18:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var s=e("./Bookmarks.js"),r=i(s),o=e("./Notifications.js"),a=i(o),l=e("./ModelessBox.js"),u=(i(l),e("./Popup.js")),c=(i(u),e("./Item.js"));i(c);window&&(window.Notifications=a["default"],window.Bookmarks=r["default"]),n["default"]={Notifications:a["default"],Bookmarks:r["default"]},t.exports=n["default"]},{"./Bookmarks.js":12,"./Item.js":13,"./ModelessBox.js":14,"./Notifications.js":15,"./Popup.js":16}],19:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e){var t=e.getBoundingClientRect();return{width:t.right-t.left,height:t.bottom-t.top}}function r(e,t){var n=s(e);if(e.offsetParent===t.offsetParent)n.left=e.offsetLeft,n.top=e.offsetTop;else{var i=(0,a["default"])(e);n.left=i.left,n.top=i.top}return n}Object.defineProperty(n,"__esModule",{value:!0});var o=e("tiny.js/modules/offset.js"),a=i(o);n["default"]=function(e,t){var n=s(e),i=r(t,e),o=0,a=10,l=i.top+i.height+a,u=i.left+i.width-n.width+o;e.style.top=l+"px",e.style.left=u+"px"},t.exports=n["default"]},{"tiny.js/modules/offset.js":9}],20:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=document.documentElement.lang?document.documentElement.lang.substr(0,2):"es",s={es:{bookmarks:{title:"Favoritos",all:"Ver todos"},notifications:{title:"Notificaciones",zrp:"Por ahora, no hay nada aquí."}},pt:{bookmarks:{title:"Favoritos",all:"Ver todos"},notifications:{title:"Avisos",zrp:"Por enquanto, não há nada aqui."}}};n["default"]=function(e,t){return s[i][e][t]},t.exports=n["default"]},{}],21:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function s(e){return e.text?'<span class="'+e.classname+'">'+e.text+"</span>":(0,a["default"])(e)}function r(e){var t=e.discount.original_price;return t.classname="bookmarks-price-original",t.disabled=!0,"\n        "+s(t)+'\n        <span class="bookmarks-price-wrapper">\n            '+s(e.price)+'\n            <span class="discount discount-to-left">'+e.discount.text+"</span>\n        </span>\n    "}Object.defineProperty(n,"__esModule",{value:!0});var o=e("ui-price/dist/template.js"),a=i(o);n["default"]=function(e){e.price.classname="bookmarks-price";var t=!(!e.discount||!e.discount.text);return'\n        <p class="bookmarks-title">'+e.title+'</p>\n        <p class="bookmarks-info">\n            '+(t?r(e):s(e.price))+"\n            "+(e.free_shipping?'<span class="bookmarks-shipping">'+e.free_shipping+"</span>":"")+"\n        </p>\n        "+(e.available_state?'<p class="bookmarks-availability">'+e.available_state+"</p>":"")+"\n    "},t.exports=n["default"]},{"ui-price/dist/template.js":11}],22:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={bookmarks:e("./item.bookmarks.template.js")};n["default"]=function(e){return'\n        <a href="'+e.permalink+'" class="modeless-box-item" data-type="'+e.type+'" tabindex="-1" data-id="'+e.item_id+'">\n            <img src="'+e.secure_thumbnail+'" alt="'+e.title+'" class="modeless-box-img"/>\n            <div class="modeless-box-info">\n                '+i[e.type](e)+'\n            </div>\n        </a>\n        <button data-js="modeless-box-remove" class="modeless-box-remove" tabindex="-1"></button>\n    '},t.exports=n["default"]},{"./item.bookmarks.template.js":21}],23:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n["default"]=function(e){return'<li class="modeless-box-noresults">'+e.message+"</li>"},t.exports=n["default"]},{}],24:[function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var s=e("../scripts/translations.js"),r=i(s),o={};o.bookmarks=function(){return'<div class="modeless-box-header">'+(0,r["default"])("bookmarks","title")+"</div>"},o.notifications=function(){return'<div class="modeless-box-header">'+(0,r["default"])("notifications","title")+"</div>"};var a={};a.bookmarks=function(e){return'<a href="'+e+'" class="modeless-box-footer" tabindex="-1">'+(0,r["default"])("bookmarks","all")+"</a>"},a.notifications=function(){return""},n["default"]=function(e){return"\n        "+o[e.type]()+'\n        <div class="modeless-box-container">\n            <ul class="modeless-box-list">\n                <li class="skeleton-spinner"></li>\n            </ul>\n        </div>\n        '+(e.triggerHref?a[e.type](e.triggerHref):"")+"\n    "},t.exports=n["default"]},{"../scripts/translations.js":20}]},{},[18]);